(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(40)},22:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(15),u=t.n(c),o=t(16),i=t(2),l=(t(22),t(4)),m=t.n(l),f="/api/persons",s=function(){return m.a.get(f).then((function(e){return e.data}))},d=function(e){return m.a.post(f,e).then((function(e){return e.data}))},b=function(e,n){return m.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){return m.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},p=function(e){return r.a.createElement("form",null,r.a.createElement("div",null,"filter by name: ",r.a.createElement("input",{value:e.value,onChange:e.onChange})))},E=function(e){var n=e.person,t=e.deletionFn;return r.a.createElement("li",null,n.name," ",n.number,r.a.createElement("button",{onClick:function(){return t(n.id)}},"delete"))},v=function(e){var n=e.toShow,t=e.deletionFn;return r.a.createElement("ul",null,n.map((function(e){return r.a.createElement(E,{key:e.id,person:e,deletionFn:t})})))},g=function(e){return r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.name,onChange:e.onNameChange})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.number,onChange:e.onNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},O=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:n.type},n.content)},S=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),l=Object(i.a)(u,2),m=l[0],f=l[1],E=Object(a.useState)(""),S=Object(i.a)(E,2),j=S[0],w=S[1],y=Object(a.useState)(""),C=Object(i.a)(y,2),N=C[0],F=C[1],k=Object(a.useState)(null),J=Object(i.a)(k,2),x=J[0],A=J[1];console.log("persons is ".concat(JSON.stringify(t)));var D=t.filter((function(e){return e.name.toLowerCase().indexOf(m.toLowerCase())>-1})),L=function(e,n){A({type:e,content:n}),setTimeout((function(){return A(null)}),5e3)};return Object(a.useEffect)((function(){s().then((function(e){return c(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(O,{message:x}),r.a.createElement(p,{value:m,onChange:function(e){return f(e.target.value)}}),r.a.createElement("h2",null,"Add a New Person"),r.a.createElement(g,{onSubmit:function(e){e.preventDefault();var n,a,r={name:j,number:N},u=t.find((function(e){return e.name===j}));u?window.confirm("".concat(j," already exists. Replace their number?"))&&(a=r,b((n=u).id,a).then((function(e){c(t.map((function(t){return t.id===n.id?e:t}))),L("success","Updated ".concat(n.name,"'s info to ").concat(JSON.stringify(a),"."))})).catch((function(e){L("failure","Failed to update ".concat(n.name,"'s info.\n")+JSON.stringify(e.response.data))}))):function(e){d(e).then((function(n){c([].concat(Object(o.a)(t),[n])),L("success","Added ".concat(e.name,"."))})).catch((function(n){return L("failure","Failed to add ".concat(e.name,".\n").concat(n.response.data.error))}))}(r),w(""),F("")},name:j,onNameChange:function(e){return w(e.target.value)},number:N,onNumberChange:function(e){return F(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(v,{toShow:D,deletionFn:function(e){var n=t.find((function(n){return n.id===e})).name;window.confirm("Are you sure you want to delete ".concat(n,"?"))&&(c(t.filter((function(n){return n.id!==e}))),h(e).then((function(){return L("success","Deleted ".concat(n,"."))})).catch((function(e){L("failure","Failed to delete ".concat(n,".\n").concat(e.response.data.error))})))}}))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.e4ca7d77.chunk.js.map